<include file="../public/_header" />
<div class="so_main">

  <div class="page_tit">推送消息队列</div>
  <include file="_tab" />

  <div class="search_box">
		<form name="search_form" action="/default.php" method="get">
		<input type="hidden" name="g" value="admin">
		<input type="hidden" name="m" value="push_message_list">
		<input type="hidden" name="a" value="push_message_list">

		<table border="0" cellspacing="0" cellpadding="0">
			<th>名称：</th>
			<td><input type="text" name="k" class="search_input" style="width:120px;" value="<php> echo  get('k');</php>"></td>
			<th>开始时间：</th>
			<td>
				<input type="text" name="starttime" class="search_input_date" style="width:120px;" value="<php> echo  get('starttime');</php>" onFocus="WdatePicker({isShowClear:false,readOnly:true})"> 至 
				<input type="text" name="endtime" class="search_input_date" style="width:120px;" value="<php> echo  get('endtime');</php>" onFocus="WdatePicker({isShowClear:false,readOnly:true})">
			</td>
			<!--
			<th>类型：</th>
			<td>
				<select name="course_type" style="width:120px;"  class="search_select">
					<option value="">请选择</option>
					<option value="1">课件课程</option>
					<option value="2">辅导课程</option>
				</select>
				<script>set_select_value(document.search_form.course_type,"<php> echo  get("course_type");</php>");</script>
			</td>
			-->
			<td class="btn">
				<input type="submit" value="搜索" class="btn_b" style="margin-right:8px;" >
				<input type="button" value="查看全部" class="btn_b" onclick="javascript:location='{:U('admin/push_message_list/push_message_list',array('state'=>get('state')))}';">
			</td>
		</table>
	</form>
  </div><!--/search_box-->

  <!--------list -------->
  <div class="Toolbar_inbox">
  	<div class="page right">{$pages}</div>

	<a href="{:U('admin/push_message_list/push_message_list_add')}" class="btn_a"><span>添加推送消息队列</span></a>
	<a href="javascript:void(0);" class="btn_a"  onclick="mod_delete_batch('{:U('admin/push_message_list/push_message_list_delete_action')}','mod_table');"><span>批量删除</span></a>

	<div class="clear"></div>
  </div>
  <div class="list">
	<php>if($total>0){</php>
	  <table width="100%" id="mod_table" border="0" cellspacing="0" cellpadding="0">
	  <tr>
		<th class="line_l">
			<input type="checkbox" id="checkbox_handle" onclick="select_all(this,'mod_table','checkbox')" value="0">
			<label for="checkbox"></label>
		</th>
		<th class="line_l">消息ID</th>
		<th class="line_l">编号</th>
		<th class="line_l">类型</th>
		<th class="line_l">用户</th>
		<th class="line_l">标题</th>
		<th class="line_l"  width="40%">内容</th>
	
		<th class="line_l">状态</th>
		<!--
		<th class="line_l">receiver_type</th>
		-->
		<th class="line_l">总数</th>
		<th class="line_l">发送数</th>
		<th class="line_l">错误码</th>
		<th class="line_l">错误信息</th>
		<th class="line_l">发送时间</th>
		<th class="line_l">添加时间</th>
		<th class="line_l">操作</th>
	</tr>
	<volist id="vo" name="list">
	<tr overstyle="on"  id=ids_{$vo["message_list_id"]}>
		<td><input type="checkbox" name="checkbox" onclick="select_one(this)" value="{$vo.message_list_id}" ></td>
		<td>{$vo.message_id}</th>
			<td><a href="{:U('admin/push_message_list/push_message_list_detail', array('message_list_id'=>$vo['message_list_id']))}'">{$vo.message_number}</a></td>
			<td>{$vo.message_type}</td>
			<td>{$vo.uid}</td>
			<td>{$vo.message_title}</td>
			<td style="word-break:break-all;" width="40%">长度：{$vo.msg_len}<br />{$vo.message_content}<br />
			<hr>
			token:{$vo.devices_token}
			</td>
		
			<td>{$vo.message_state}</td>
			<!--
			<td>{$vo.receiver_type}</td>
			-->
			<td>{$vo.message_totalnum}</td>
			<td>{$vo.message_sendnum}</td>
			<td>{$vo.message_errorcode}</td>
			<td>{$vo.message_errormsg}</td>
			<td>{$vo.message_sendtime|format_to_time}</td>
			<td>{$vo.message_addtime|format_to_time}</td>
		<td>
			<a href="{:U('admin/push_message_list/push_message_list_edit', array('message_list_id'=>$vo['message_list_id']))})">修改</a> | 
			<a href="javascript:void(0);" onclick="mod_delete_one('{:U('admin/push_message_list/push_message_list_delete_action')}','{$vo['message_list_id']}');">删除</a>
		</td>
	</tr>
	</volist>
    </table>
	  <php>}else{</php>
			<div class="no_data">
				<img src="/skin/images/no_data.gif" align="absmiddle"> <span>没有推送消息队列... </span>
			</div>
	 <php>}</php>
  </div>

  <div class="Toolbar_inbox">
	<div class="page right">{$pages}</div>

	<a href="{:U('admin/push_message_list/push_message_list_add')}" class="btn_a"><span>添加推送消息队列</span></a>
	<a href="javascript:void(0);" class="btn_a"  onclick="mod_delete_batch('{:U('admin/push_message_list/push_message_list_delete_action')}','mod_table');"><span>批量删除</span></a>


	<div class="clear"></div>
  </div>
</div>

<script>
	$(document).ready(function(){
		$("tr[overstyle='on']").hover(
		  function ()
		  {
		    $(this).addClass("bg_hover");
		  },
		  function (){
		    $(this).removeClass("bg_hover");
		  }
		);
	});
</script>


<include file="../public/_footer" />